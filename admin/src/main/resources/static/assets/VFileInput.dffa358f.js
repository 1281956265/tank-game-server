import{y as q,ay as O,az as Q,aA as W,aB as X,aC as Y,f as c,aD as A,r as y,T as Z,H as ee,aE as le,aF as ae,aG as te,b as n,aH as ne,U as C,F as k,a3 as oe,aI as ue,aJ as ie,aK as se,aL as w,aj as re}from"./index.78d81d6b.js";const ve=q({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...O({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>Q(e).every(f=>f!=null&&typeof f=="object")},...W({clearable:!0})},emits:{"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,f){let{attrs:_,emit:D,slots:o}=f;const{t:I}=X(),t=Y(e,"modelValue"),V=c(()=>typeof e.showSize!="boolean"?e.showSize:void 0),S=c(()=>{var l;return((l=t.value)!=null?l:[]).reduce((a,u)=>{let{size:d=0}=u;return a+d},0)}),F=c(()=>A(S.value,V.value)),g=c(()=>{var l;return((l=t.value)!=null?l:[]).map(a=>{const{name:u="",size:d=0}=a;return e.showSize?`${u} (${A(d,V.value)})`:u})}),H=c(()=>{var u;var l;const a=(u=(l=t.value)==null?void 0:l.length)!=null?u:0;return e.showSize?I(e.counterSizeString,a,F.value):I(e.counterString,a)}),z=y(),b=y(),r=y(!1),i=y(),N=c(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function h(){if(i.value!==document.activeElement){var l;(l=i.value)==null||l.focus()}r.value||(r.value=!0)}function j(l){w(e["onClick:prepend"],l),P(l)}function P(l){var a;(a=i.value)==null||a.click(),D("click:control",l)}function E(l){l.stopPropagation(),h(),re(()=>{t.value=[],w(e["onClick:clear"],l)})}return Z(t,l=>{(!Array.isArray(l)||!l.length)&&i.value&&(i.value.value="")}),ee(()=>{const l=!!(o.counter||e.counter),a=!!(l||o.details),[u,d]=le(_),[{modelValue:ce,...M}]=ae(e),[x]=te(e);return n(ie,C({ref:z,modelValue:t.value,"onUpdate:modelValue":v=>t.value=v,class:"v-file-input","onClick:prepend":j,"onClick:append":e["onClick:append"]},u,M,{focused:r.value,messages:N.value}),{...o,default:v=>{let{id:m,isDisabled:p,isDirty:B,isReadonly:L,isValid:T}=v;return n(ne,C({ref:b,"prepend-icon":e.prependIcon,"onClick:control":P,"onClick:clear":E,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},x,{id:m.value,active:B.value||r.value,dirty:B.value,focused:r.value,error:T.value===!1}),{...o,default:U=>{var R;let{props:{class:G,...J}}=U;return n(k,null,[n("input",C({ref:i,type:"file",readonly:L.value,disabled:p.value,multiple:e.multiple,name:e.name,onClick:s=>{s.stopPropagation(),h()},onChange:s=>{var $;if(!s.target)return;const K=s.target;t.value=[...($=K.files)!=null?$:[]]},onFocus:h,onBlur:()=>r.value=!1},J,d),null),n("div",{class:G},[!!((R=t.value)!=null&&R.length)&&(o.selection?o.selection({fileNames:g.value,totalBytes:S.value,totalBytesReadable:F.value}):e.chips?g.value.map(s=>n(oe,{key:s,size:"small",color:e.color},{default:()=>[s]})):g.value.join(", "))])])}})},details:a?v=>{var m,p;return n(k,null,[(m=o.details)==null?void 0:m.call(o,v),l&&n(k,null,[n("span",null,null),n(ue,{active:!!((p=t.value)!=null&&p.length),value:H.value},o.counter)])])}:void 0})}),se({},z,b,i)}});export{ve as V};
